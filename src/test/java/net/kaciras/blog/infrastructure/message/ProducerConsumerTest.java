package net.kaciras.blog.infrastructure.message;

import org.junit.jupiter.api.Test;

class ProducerConsumerTest {

	@Test
	void test() throws Exception {
//		LinkedEventQueue eventQueueA = new LinkedEventQueue();
//		LinkedEventQueue eventQueueB = new LinkedEventQueue();
//		MessageClient clientA = new StandardMessageClient(eventQueueA, eventQueueB);
//		MessageClient clientB = new StandardMessageClient(eventQueueB, eventQueueA);
//
//		AtomicInteger ai = new AtomicInteger();
//		clientB.subscribe(UserRoleDeletedEvent.class, e -> ai.addAndGet(1));
//
//		clientA.send(new UserRoleDeletedEvent()).subscribe(r -> ai.addAndGet(10));
//
//		Thread.sleep(1000);
//		Assertions.assertEquals(11, ai.get());
	}
}
